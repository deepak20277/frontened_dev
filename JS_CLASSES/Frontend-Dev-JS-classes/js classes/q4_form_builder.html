<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Q4</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f7f7f7; color: #222; }
.container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
h1 { margin-top: 0; }
.field { margin-bottom: 12px; }
input, select, button, textarea { padding: 8px; font-size: 14px; width: 100%; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
input.invalid, textarea.invalid, select.invalid { border-color: #e74c3c; }
input.valid, textarea.valid, select.valid { border-color: #2ecc71; }
.error { color: #e74c3c; font-size: 13px; }
.success { color: #2ecc71; font-size: 14px; }
.nav { margin-bottom: 16px; }
.nav a { margin-right: 10px; text-decoration:none; color:#3498db; }
.card { padding: 12px; border:1px solid #eee; border-radius:6px; background:#fafafa; }
small.note { color:#666; }
</style>
</head>
<body>
<div class="container">
<nav class="nav"><a href="index.html">Home</a></nav>

<h1>Q4: Custom Form Builder</h1>
<div class="card">
  <div class="field"><textarea id="fieldsJson" rows="4" placeholder='Example: [{"type":"text","label":"Username","name":"username"},{"type":"email","label":"Email","name":"email"}]'></textarea></div>
  <div class="field"><button id="build">Build Form</button></div>
  <form id="dynamicForm" class="card"></form>
  <div class="field"><button id="getData">Get Form Data</button></div>
  <pre id="formDataOut"></pre>
</div>

</div>
<script>

class FormBuilder {
  constructor(fields, container){
    this.fields = fields;
    this.container = container;
  }
  render(){
    this.container.innerHTML = '';
    this.fields.forEach(f=>{
      const wrapper = document.createElement('div');
      wrapper.className = 'field';
      const label = document.createElement('label'); label.textContent = f.label || f.name || '';
      let input;
      if(f.type==='textarea'){ input = document.createElement('textarea'); }
      else { input = document.createElement('input'); input.type = f.type || 'text'; }
      input.name = f.name || f.label.toLowerCase().replace(/\s+/g,'_');
      wrapper.appendChild(label); wrapper.appendChild(input);
      this.container.appendChild(wrapper);
    });
    const submit = document.createElement('button'); submit.type='button'; submit.textContent='Submit'; submit.addEventListener('click', ()=>{});
    this.container.appendChild(submit);
  }
  getFormData(){
    const data = {};
    this.container.querySelectorAll('input,textarea,select').forEach(el=>{
      data[el.name] = el.value;
    });
    return data;
  }
}

document.getElementById('build').addEventListener('click', ()=>{
  let parsed = [];
  try {
    parsed = JSON.parse(document.getElementById('fieldsJson').value);
  } catch(e){
    alert('Invalid JSON');
    return;
  }
  const fb = new FormBuilder(parsed, document.getElementById('dynamicForm'));
  fb.render();
  // save instance for retrieval
  window.__FB = fb;
});
document.getElementById('getData').addEventListener('click', ()=>{
  if(window.__FB){
    document.getElementById('formDataOut').textContent = JSON.stringify(window.__FB.getFormData(), null, 2);
  } else alert('Build the form first');
});

</script>
</body>
</html>
